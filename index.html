<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xlwenic</title>

    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RRVD3RER91"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-RRVD3RER91');
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html, body {
            width: 100%;
            height: 100vh;
            overflow: hidden;
            font-family: Arial, sans-serif;
            background-color: #121212;
            color: white;
            display: flex;
            flex-direction: column;
        }
        .header {
            background-color: #1e1e1e;
            padding: 12px;
            text-align: center;
            font-size: 18px;
            height: 50px;
            flex-shrink: 0;
        }
        .chat-container {
            flex: 1;
            padding: 15px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            height: calc(100vh - 100px);
        }
        .message {
            padding: 12px;
            margin: 8px 0;
            border-radius: 10px;
            font-size: 16px;
            line-height: 1.5;
            opacity: 0;
            animation: fadeIn 0.1s ease-in forwards;
            word-wrap: break-word;
            max-width: 100%;
            display: flex;
            justify-content: space-between;
            position: relative;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(3px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .user {
            background-color: #2a2a2a;
            align-self: flex-end;
            color: #e3e3e3;
        }
        .bot {
            background-color: #2b2b2b;
            align-self: flex-start;
            width: 100%;
            color: #e3e3e3;
        }
        .copy-btn {
            font-size: 12px;
            padding: 3px 6px;
            background-color: #444;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-left: 8px;
            display: none;
            transition: opacity 0.2s ease-in-out;
        }
        .bot:hover .copy-btn {
            display: inline-block;
        }
        .input-container {
            display: flex;
            padding: 10px;
            background-color: #1e1e1e;
            height: 50px;
            flex-shrink: 0;
        }
        input {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-size: 15px;
            background-color: #2b2b2b;
            color: white;
        }
        button {
            padding: 10px;
            background-color: #0078d4;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="header">Xlwenic</div>

    <div class="chat-container" id="chat-container"></div>

    <div class="input-container">
        <input type="text" id="user-input" placeholder="Type a message..." />
        <button onclick="sendMessage()">Send</button>
    </div>

    <script>
        async function sendMessage() {
            let inputField = document.getElementById("user-input");
            let message = inputField.value.trim();
            if (message === "") return;

            addMessage(message, "user");
            inputField.value = "";

            gtag('event', 'user_message', { 'message': message });

            let typingIndicator = document.createElement("div");
            typingIndicator.textContent = "Xlwenic is typing...";
            typingIndicator.classList.add("message", "bot", "typing");
            document.getElementById("chat-container").appendChild(typingIndicator);
            scrollToBottom();

            let response = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                method: "POST",
                headers: {
                    "Authorization": "Bearer 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",
                    "HTTP-Referer": "https://xlwenic.lua.ren",
                    "X-Title": "Xlwenic AI Chat",
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    "model": "google/gemini-2.0-flash-lite-preview-02-05:free",
                    "messages": [{ "role": "user", "content": message }]
                })
            });

            let data = await response.json();
            let botReply = data.choices?.[0]?.message?.content || "Error: No response from AI.";

            if (botReply.includes("I am a large language model, trained by Google.")) {
                botReply = "Itâ€™s Xlwenic and Made By Xnic Corp. Xnic Corp using Google Dataset for Xlwenic. Current Dataset Trained By Google. The Only One Founder of Xnic Corp is Al Baradi Joy. In Future Xnic Corp will Come with his Own Dataset after Complete their Training and Experiment.";
            }

            setTimeout(() => {
                typingIndicator.remove();
                typeMessage(botReply, "bot");
            }, 50);

            gtag('event', 'bot_response', { 'response': botReply });
        }

        function addMessage(text, sender) {
            let chatContainer = document.getElementById("chat-container");
            let messageDiv = document.createElement("div");
            messageDiv.classList.add("message", sender);
            messageDiv.textContent = text;
            chatContainer.appendChild(messageDiv);
            scrollToBottom();
        }

        function typeMessage(text, sender) {
            let chatContainer = document.getElementById("chat-container");
            let messageDiv = document.createElement("div");
            messageDiv.classList.add("message", sender);
            
            let copyButton = document.createElement("button");
            copyButton.textContent = "Copy";
            copyButton.classList.add("copy-btn");
            copyButton.onclick = () => copyToClipboard(text);
            
            messageDiv.appendChild(copyButton);
            chatContainer.appendChild(messageDiv);
            scrollToBottom();

            let index = 0;
            function typeLetter() {
                if (index < text.length) {
                    messageDiv.insertBefore(document.createTextNode(text[index]), copyButton);
                    index++;
                    setTimeout(typeLetter, 1);
                }
            }
            typeLetter();
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                alert("Copied to clipboard!");
            });
        }

        function scrollToBottom() {
            let chatContainer = document.getElementById("chat-container");
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
    </script>
</body>
</html>
